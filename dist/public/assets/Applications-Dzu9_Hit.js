import{j as e}from"./ui-D4qm5_HU.js";import{r as D}from"./vendor--0RGCJ5T.js";import{G as B,J as H,K as Y,Q as k,N as $,B as i,aH as C,P as T,C as d,g as c,a3 as A,a6 as g,aY as J,ae as V,e as S,f as P,a5 as I,T as K,h as O,i as o,k as W,V as j,W as G,a7 as _,ak as Z,ag as M,a2 as X,O as ee,Y as se,af as te,Z as ae,_ as re,$ as le,a0 as ie,a1 as ne,aQ as de,aJ as U,w as ce}from"./index-BNOyMxPp.js";import{b as oe}from"./query-DwD54YTm.js";import{T as me}from"./trash-2-BG6rtAPd.js";const xe={id:"user-1",firstName:"John",lastName:"Doe",email:"john.doe@example.com",userType:"customer"},ue={draft:{label:"Draft",color:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",icon:M},submitted:{label:"Submitted",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",icon:g},under_review:{label:"Under Review",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",icon:U},accepted:{label:"Accepted",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",icon:g},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",icon:_},waitlisted:{label:"Waitlisted",color:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",icon:U}};function fe(){D.useState(xe);const[l,E]=D.useState("all"),{toast:p}=B(),R=oe(),{data:a=[],isLoading:z}=H(["/api/applications"],"/api/applications",void 0,{staleTime:2*60*1e3}),x=Y(async s=>ce.delete(`/api/applications/${s}`),{onSuccess:()=>{R.invalidateQueries({queryKey:["/api/applications"]}),p({title:"Application deleted",description:"Your application has been successfully deleted."})},onError:s=>{p({title:"Error",description:s.message||"Failed to delete application",variant:"destructive"})}}),F=s=>l==="all"?s:s.filter(r=>r.status===l),L=()=>({all:a.length,draft:a.filter(s=>s.status==="draft").length,submitted:a.filter(s=>s.status==="submitted").length,under_review:a.filter(s=>s.status==="under_review").length,accepted:a.filter(s=>s.status==="accepted").length,rejected:a.filter(s=>s.status==="rejected").length,waitlisted:a.filter(s=>s.status==="waitlisted").length}),Q=()=>{const s=a.length,r=a.filter(m=>["submitted","under_review","accepted","rejected","waitlisted"].includes(m.status)).length;return{total:s,completed:r,percentage:s>0?Math.round(r/s*100):0}},q=s=>{const r=new Date(s),m=new Date,n=r.getTime()-m.getTime();return Math.ceil(n/(1e3*60*60*24))},t=L(),u=Q(),b=F(a);return z?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(k,{}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsx($,{type:"card",count:4})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(k,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"My Applications"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage your university applications"})]}),e.jsx(i,{asChild:!0,children:e.jsxs(C,{href:"/universities",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"New Application"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(d,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(A,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.all})]})]})})}),e.jsx(d,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Submitted"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.submitted+t.under_review})]})]})})}),e.jsx(d,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Accepted"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.accepted})]})]})})}),e.jsx(d,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsx(V,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[t.all>0?Math.round(t.accepted/t.all*100):0,"%"]})]})]})})})]}),e.jsxs(d,{className:"mb-8",children:[e.jsx(S,{children:e.jsx(P,{children:"Application Progress"})}),e.jsxs(c,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.completed,"/",u.total," completed"]})]}),e.jsx(I,{value:u.percentage,className:"h-2"})]})]}),e.jsxs(d,{children:[e.jsx(S,{children:e.jsx(P,{children:"Applications"})}),e.jsx(c,{children:e.jsxs(K,{value:l,onValueChange:E,children:[e.jsxs(O,{className:"mb-6",children:[e.jsxs(o,{value:"all",children:["All (",t.all,")"]}),e.jsxs(o,{value:"draft",children:["Draft (",t.draft,")"]}),e.jsxs(o,{value:"submitted",children:["Submitted (",t.submitted,")"]}),e.jsxs(o,{value:"under_review",children:["Under Review (",t.under_review,")"]}),e.jsxs(o,{value:"accepted",children:["Accepted (",t.accepted,")"]}),e.jsxs(o,{value:"rejected",children:["Rejected (",t.rejected,")"]})]}),e.jsx(W,{value:l,children:e.jsxs("div",{className:"space-y-4",children:[b.map(s=>{var h,f,N,v,y,w;const r=ue[s.status],m=r.icon,n=s.deadlineDate?q(s.deadlineDate):null;return e.jsx(d,{className:"hover:shadow-md transition-shadow",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-amber-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:(h=s.university)==null?void 0:h.name.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:((f=s.university)==null?void 0:f.name)||"University Name"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(N=s.course)==null?void 0:N.name," â€¢ ",(v=s.course)==null?void 0:v.degree]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(y=s.university)==null?void 0:y.city,", ",(w=s.university)==null?void 0:w.country]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs(j,{className:r.color,children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),r.label]}),s.submittedAt&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Submitted ",new Date(s.submittedAt).toLocaleDateString()]}),n&&n>0&&e.jsxs(j,{variant:"outline",className:"text-amber-600 border-amber-200",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),n," days left"]}),n&&n<=0&&e.jsxs(j,{variant:"destructive",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),"Deadline passed"]})]}),s.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.notes})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),"View"]}),s.status==="draft"&&e.jsxs(i,{size:"sm",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),"Documents"]}),e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Notes"]}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(i,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",children:e.jsx(me,{className:"w-4 h-4"})})}),e.jsxs(ae,{children:[e.jsxs(re,{children:[e.jsx(le,{children:"Delete Application"}),e.jsx(ie,{children:"Are you sure you want to delete this application? This action cannot be undone."})]}),e.jsxs(ne,{children:[e.jsx(i,{variant:"outline",children:"Cancel"}),e.jsx(i,{variant:"destructive",onClick:()=>x.mutate(s.id),disabled:x.isPending,children:x.isPending?"Deleting...":"Delete"})]})]})]})]})]})})},s.id)}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:l==="all"?"No applications yet":`No ${l} applications`}),e.jsx("p",{className:"text-muted-foreground mb-4",children:l==="all"?"Start your journey by creating your first application":`You don't have any ${l} applications at the moment`}),l==="all"&&e.jsx(i,{asChild:!0,children:e.jsxs(C,{href:"/universities",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Create First Application"]})})]})]})})]})})]})]}),e.jsx(de,{})]})}export{fe as default};
